# Production-Ready ansible.cfg Configuration
# Place this in your project directory

[defaults]
# Inventory
inventory = ./inventory/hosts
# inventory = ./inventory/  # Use directory for multiple inventory files

# Connection
remote_user = ansible
private_key_file = ~/.ssh/ansible_key
ask_pass = False
host_key_checking = False
timeout = 30

# Execution
forks = 20
poll_interval = 5
gathering = smart
gather_subset = !hardware,!ohai,!facter

# Fact Caching (improves performance)
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts_cache
fact_caching_timeout = 86400

# Output
stdout_callback = yaml
callback_enabled = timer, profile_tasks, profile_roles
display_skipped_hosts = True
display_ok_hosts = True
show_per_host_start = True

# Logging
log_path = ./logs/ansible.log

# Paths
roles_path = ./roles:~/.ansible/roles:/etc/ansible/roles
collections_path = ~/.ansible/collections:/usr/share/ansible/collections
module_utils = ./module_utils

# Misc
retry_files_enabled = False
nocows = True
deprecation_warnings = True
system_warnings = True

# Interpreter Discovery
interpreter_python = auto_silent

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False
become_flags = -H -S

[ssh_connection]
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=600s -o PreferredAuthentications=publickey
control_path_dir = ~/.ansible/cp
control_path = %(directory)s/%%h-%%p-%%r
retries = 3
timeout = 10

[persistent_connection]
connect_timeout = 60
command_timeout = 60
connect_retry_timeout = 30

[inventory]
enable_plugins = host_list, script, auto, yaml, ini, toml
unparsed_is_failed = True

[galaxy]
server_list = release_galaxy

[galaxy_server.release_galaxy]
url = https://galaxy.ansible.com/
